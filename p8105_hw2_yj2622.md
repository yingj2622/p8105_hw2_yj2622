Homework 2
================
Ying Jin
2020/9/24

This is the solution to homework 2\!

## Problem 1

Read and clean the Mr. Trash Wheel data:

``` r
mr_trash_wheel_data <- read_excel("./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",sheet = "Mr. Trash Wheel",skip = 1,range = cell_cols("A:N")) %>% 
  janitor::clean_names() %>% 
  drop_na(dumpster) %>% 
  mutate(
    sports_balls = round(sports_balls),
    sports_balls = as.integer(sports_balls)
  )
```

The first 10 rows of cleaned Mr. Trash Wheel data:

    ## # A tibble: 344 x 14
    ##    dumpster month  year date                weight_tons volume_cubic_ya~
    ##       <dbl> <chr> <dbl> <dttm>                    <dbl>            <dbl>
    ##  1        1 May    2014 2014-05-16 00:00:00        4.31               18
    ##  2        2 May    2014 2014-05-16 00:00:00        2.74               13
    ##  3        3 May    2014 2014-05-16 00:00:00        3.45               15
    ##  4        4 May    2014 2014-05-17 00:00:00        3.1                15
    ##  5        5 May    2014 2014-05-17 00:00:00        4.06               18
    ##  6        6 May    2014 2014-05-20 00:00:00        2.71               13
    ##  7        7 May    2014 2014-05-21 00:00:00        1.91                8
    ##  8        8 May    2014 2014-05-28 00:00:00        3.7                16
    ##  9        9 June   2014 2014-06-05 00:00:00        2.52               14
    ## 10       10 June   2014 2014-06-11 00:00:00        3.76               18
    ## # ... with 334 more rows, and 8 more variables: plastic_bottles <dbl>,
    ## #   polystyrene <dbl>, cigarette_butts <dbl>, glass_bottles <dbl>,
    ## #   grocery_bags <dbl>, chip_bags <dbl>, sports_balls <int>,
    ## #   homes_powered <dbl>

Read precipitation data:

``` r
precip_2018 <- read_excel("./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",sheet = "2018 Precipitation",skip = 1) %>% 
  janitor::clean_names() %>% 
  drop_na(month) %>% 
  mutate(year = 2018) %>% 
  relocate(year)

precip_2017 <- read_excel("./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",sheet = "2017 Precipitation",skip = 1) %>% 
  janitor::clean_names() %>% 
  drop_na(month) %>% 
  mutate(year = 2017) %>% 
  relocate(year)
```

Combine annual precipitation:

``` r
month_df <- tibble(
  month = 1:12,
  month_name = month.name
)
precip_df <- bind_rows(precip_2017,precip_2018) %>% 
left_join( month_df, by = "month") %>% 
  select(-month) %>% 
  rename("month" ="month_name")
```

The first 10 rows of combined annual precipitation:

    ## # A tibble: 24 x 3
    ##     year total month    
    ##    <dbl> <dbl> <chr>    
    ##  1  2017  2.34 January  
    ##  2  2017  1.46 February 
    ##  3  2017  3.57 March    
    ##  4  2017  3.99 April    
    ##  5  2017  5.64 May      
    ##  6  2017  1.4  June     
    ##  7  2017  7.09 July     
    ##  8  2017  4.44 August   
    ##  9  2017  1.95 September
    ## 10  2017  0    October  
    ## # ... with 14 more rows

This dataset contains information from the Mr. Trash Wheel trash
collector in Baltimore, Maryland. The trash enters the innder harbor,
the trashwheel collectes that trash, and stores it in a dumpster.

  - The dataset contains information on year, month and trash collected,
    including some specific kind of trash. There are a total of 344 rows
    in the final dataset.

  - Additional data sheets include month precipitation data from 2014 to
    2019. The combined precipitation dataset has 24 rows and key
    variables are year, month and precipitation amount.

  - The total precipitation in 2018 was 70.33. The median number of
    sports balls in 2017 was 8.

## Problem 2

Read and clean NYC transit data:

``` r
nyc_transit_data <- read_csv("./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>% 
  janitor::clean_names() %>% 
  select(line, station_name, station_latitude, station_longitude, starts_with("route"), entry, vending, entrance_type, ada) %>% 
  mutate(entry = recode(entry, "YES" = TRUE,"NO" = FALSE))
```

The first 10 lines of the cleaned NYC transit dataset :

``` r
nyc_transit_data
```

    ## # A tibble: 1,868 x 19
    ##    line  station_name station_latitude station_longitu~ route1 route2 route3
    ##    <chr> <chr>                   <dbl>            <dbl> <chr>  <chr>  <chr> 
    ##  1 4 Av~ 25th St                  40.7            -74.0 R      <NA>   <NA>  
    ##  2 4 Av~ 25th St                  40.7            -74.0 R      <NA>   <NA>  
    ##  3 4 Av~ 36th St                  40.7            -74.0 N      R      <NA>  
    ##  4 4 Av~ 36th St                  40.7            -74.0 N      R      <NA>  
    ##  5 4 Av~ 36th St                  40.7            -74.0 N      R      <NA>  
    ##  6 4 Av~ 45th St                  40.6            -74.0 R      <NA>   <NA>  
    ##  7 4 Av~ 45th St                  40.6            -74.0 R      <NA>   <NA>  
    ##  8 4 Av~ 45th St                  40.6            -74.0 R      <NA>   <NA>  
    ##  9 4 Av~ 45th St                  40.6            -74.0 R      <NA>   <NA>  
    ## 10 4 Av~ 53rd St                  40.6            -74.0 R      <NA>   <NA>  
    ## # ... with 1,858 more rows, and 12 more variables: route4 <chr>, route5 <chr>,
    ## #   route6 <chr>, route7 <chr>, route8 <dbl>, route9 <dbl>, route10 <dbl>,
    ## #   route11 <dbl>, entry <lgl>, vending <chr>, entrance_type <chr>, ada <lgl>

This dataset provides information about each entrance and exit for each
subway in NYC.

  - It contains infromation on station name, location, routes and
    whether it’s an entry.

  - There are total 1868 rows and 19 columns in this dataset.

  - My cleaning steps:
    
      - change the variable names into proper format;
    
      - select columns needed;
    
      - convert the values of `entry` to logical variables.

  - And these data are not tidy because how routes were displayed are
    not proper.

Then I try to answer questions in problem 2:

First, I calculate the number different subway stations:

``` r
n_of_diff_station <- select(nyc_transit_data,station_name,line) %>% 
  distinct %>% 
  nrow
```

There are 465 different stations in the dataset.

Next, I try to find the number of stations with ADA compliance:

``` r
n_of_station_with_ada <- select(nyc_transit_data,station_name,line,ada) %>% distinct(station_name,line,.keep_all = TRUE) %>% 
  filter(ada == TRUE) %>%
  nrow
```

There are 84 stations which are ADA compliant.

Last, I calculat ethe proportion of entrances/ exits without vending
allow entrance:

``` r
n_of_station_no_vending <- select(nyc_transit_data,station_name,line,vending) %>% distinct(station_name,line,.keep_all = TRUE) %>% filter(vending == "NO") %>% nrow

p <- n_of_station_no_vending/ n_of_diff_station
```

There are 1.9% of entrances/exits without vending allow entrance.
